<div id="pad-wrapper" class="form-page">

    <div class="row-fluid form-wrapper">
        <div class="span12 column">

            <form operation="update" object="source">
                <div class="field-box">
                    <label>数据源名称：</label>
                    <input name="name" id="name" class="span6 inline-input" type="text" value="{{.object.Name}}" required />
                </div>
                <div class="field-box">
                    <label>数据源分类：</label>
                    <select  name="SourceType" id="SourceType" value={{.object.DatasourceTypeId}} class="select2" style="width: 140px;height:30px">

                        {{- range .sourceTypelist }}
                            {{ if  eq .sourceType .Type}}
                        <option value="{{.sourceType}}" selected="selected">{{.sourceType}}</option>
                        {{ else }}
                        <option value="{{.sourceType}}" >{{.sourceType}}</option>
                        {{ end }}
                        {{- end}}

                    </select>




                </div>
                <div class="field-box">
              <input     id="img" type="button"  class="image-uplaod" />
                    <input     id="imghidden" type="button"  class="image-uplaod" s/>
                </div>



                <div class="field-box">
                    <label>&nbsp;</label>
                    <input  name="id" id="id" type="hidden" value="{{.object.ObjectId}}" />
                </div>



                <div class="field-box">
                    <input type="submit" class="btn-flat default" value="提 交" style="margin-left:66px">
                    <input type="button" class="btn-flat gray" action="cancel"  style="margin-left:25px" value="取 消">
                </div>
            </form>
        </div>
    </div>
</div>

<script src="/static/js/ajaxfileupload.js" type="text/javascript" ></script>

<script style="text/javascript">
function ajaxFileUploads(myBlogImage,imgId,img){
                   $.ajaxFileUpload({
                       url: '/source/uploadfile',
                      secureuri:false,                      //是否启用安全提交,默认为false
                      fileElementId:myBlogImage,           //文件选择框的id属性
                       dataType:'json',                       //服务器返回的格式,可以是json或xml等
                       fileSize:5120000,
                        allowType:'jpg,jpeg,png,JPG,JPEG,PNG',
                        success:function(data, status){        //服务器响应成功时的处理函数
                           if( true == data.success){     //0表示上传成功(后跟上传后的文件路径),1表示失败(后跟失败描述)
                               $("img[id='"+imgId+"']").attr("src", "${imgServer}"+data.result);
                                $("#"+img).val(data.result);
                               alert('图片上传成功');
                          }
                        },
                        error:function(data, status, e){ //服务器响应失败时的处理函数
    　　　　　　　　　　　　　　　　alert(e);
                       }
                    });
                }
</script>